{"ast":null,"code":"var _jsxFileName = \"/home/freedom/Music/tcp2.0-frontend/src/NetworkDetector.js\";\nimport React, { Component } from 'react';\nimport { baseUrl } from './api';\nexport default function (ComposedComponent) {\n  class NetworkDetector extends Component {\n    constructor(...args) {\n      super(...args);\n      this.state = {\n        isDisconnected: false\n      };\n\n      this.handleConnectionChange = () => {\n        const condition = navigator.onLine ? 'online' : 'offline';\n\n        if (condition === 'online') {\n          const webPing = setInterval(() => {\n            fetch(baseUrl, {\n              mode: 'no-cors'\n            }).then(() => {\n              this.setState({\n                isDisconnected: false\n              }, () => {\n                return clearInterval(webPing);\n              });\n            }).catch(() => this.setState({\n              isDisconnected: true\n            }));\n          }, 2000);\n          return;\n        }\n\n        return this.setState({\n          isDisconnected: true\n        });\n      };\n    }\n\n    componentDidMount() {\n      this.handleConnectionChange();\n      window.addEventListener('online', this.handleConnectionChange);\n      window.addEventListener('offline', this.handleConnectionChange);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('online', this.handleConnectionChange);\n      window.removeEventListener('offline', this.handleConnectionChange);\n    }\n\n    render() {\n      const {\n        isDisconnected\n      } = this.state;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"network-issue-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 9\n        }\n      }, isDisconnected && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"internet-error\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 32\n        }\n      }, /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 15\n        }\n      }, \"Internet connection lost\")), /*#__PURE__*/React.createElement(ComposedComponent, Object.assign({}, this.props, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }\n      })));\n    }\n\n  }\n\n  return NetworkDetector;\n}","map":{"version":3,"sources":["/home/freedom/Music/tcp2.0-frontend/src/NetworkDetector.js"],"names":["React","Component","baseUrl","ComposedComponent","NetworkDetector","state","isDisconnected","handleConnectionChange","condition","navigator","onLine","webPing","setInterval","fetch","mode","then","setState","clearInterval","catch","componentDidMount","window","addEventListener","componentWillUnmount","removeEventListener","render","props"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,OAAxB;AACA,eAAe,UAAUC,iBAAV,EAA6B;AAC1C,QAAMC,eAAN,SAA8BH,SAA9B,CAAwC;AAAA;AAAA;AAAA,WACtCI,KADsC,GAC9B;AACNC,QAAAA,cAAc,EAAE;AADV,OAD8B;;AAAA,WAiBtCC,sBAjBsC,GAiBb,MAAM;AAC7B,cAAMC,SAAS,GAAGC,SAAS,CAACC,MAAV,GAAmB,QAAnB,GAA8B,SAAhD;;AACA,YAAIF,SAAS,KAAK,QAAlB,EAA4B;AAC1B,gBAAMG,OAAO,GAAGC,WAAW,CACzB,MAAM;AACJC,YAAAA,KAAK,CAACX,OAAD,EAAU;AACbY,cAAAA,IAAI,EAAE;AADO,aAAV,CAAL,CAGCC,IAHD,CAGM,MAAM;AACV,mBAAKC,QAAL,CAAc;AAAEV,gBAAAA,cAAc,EAAE;AAAlB,eAAd,EAAyC,MAAM;AAC7C,uBAAOW,aAAa,CAACN,OAAD,CAApB;AACD,eAFD;AAGD,aAPD,EAOGO,KAPH,CAOS,MAAM,KAAKF,QAAL,CAAc;AAAEV,cAAAA,cAAc,EAAE;AAAlB,aAAd,CAPf;AAQD,WAVwB,EAUtB,IAVsB,CAA3B;AAWA;AACD;;AAED,eAAO,KAAKU,QAAL,CAAc;AAAEV,UAAAA,cAAc,EAAE;AAAlB,SAAd,CAAP;AACD,OAnCqC;AAAA;;AAKtCa,IAAAA,iBAAiB,GAAG;AAClB,WAAKZ,sBAAL;AACAa,MAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkC,KAAKd,sBAAvC;AACAa,MAAAA,MAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmC,KAAKd,sBAAxC;AACD;;AAEDe,IAAAA,oBAAoB,GAAG;AACrBF,MAAAA,MAAM,CAACG,mBAAP,CAA2B,QAA3B,EAAqC,KAAKhB,sBAA1C;AACAa,MAAAA,MAAM,CAACG,mBAAP,CAA2B,SAA3B,EAAsC,KAAKhB,sBAA3C;AACD;;AAuBDiB,IAAAA,MAAM,GAAG;AACP,YAAM;AAAElB,QAAAA;AAAF,UAAqB,KAAKD,KAAhC;AACA,0BACE;AAAK,QAAA,SAAS,EAAC,yBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACIC,cAAc,iBAAK;AAAK,QAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oCADiB,CADvB,eAKE,oBAAC,iBAAD,oBAAuB,KAAKmB,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SALF,CADF;AASD;;AAhDqC;;AAmDxC,SAAOrB,eAAP;AACD","sourcesContent":["import React, { Component } from 'react';\nimport { baseUrl } from './api';\nexport default function (ComposedComponent) {\n  class NetworkDetector extends Component {\n    state = {\n      isDisconnected: false\n    }\n\n    componentDidMount() {\n      this.handleConnectionChange();\n      window.addEventListener('online', this.handleConnectionChange);\n      window.addEventListener('offline', this.handleConnectionChange);\n    }\n\n    componentWillUnmount() {\n      window.removeEventListener('online', this.handleConnectionChange);\n      window.removeEventListener('offline', this.handleConnectionChange);\n    }\n\n\n    handleConnectionChange = () => {\n      const condition = navigator.onLine ? 'online' : 'offline';\n      if (condition === 'online') {\n        const webPing = setInterval(\n          () => {\n            fetch(baseUrl, {\n              mode: 'no-cors',\n              })\n            .then(() => {\n              this.setState({ isDisconnected: false }, () => {\n                return clearInterval(webPing)\n              });\n            }).catch(() => this.setState({ isDisconnected: true }) )\n          }, 2000);\n        return;\n      }\n\n      return this.setState({ isDisconnected: true });\n    }\n\n    render() {\n      const { isDisconnected } = this.state;\n      return (\n        <div className=\"network-issue-container\">\n          { isDisconnected && (<div className=\"internet-error\">\n              <p>Internet connection lost</p>\n            </div>)\n          }\n          <ComposedComponent {...this.props} />\n        </div>\n      );\n    }\n  }\n\n  return NetworkDetector;\n}"]},"metadata":{},"sourceType":"module"}