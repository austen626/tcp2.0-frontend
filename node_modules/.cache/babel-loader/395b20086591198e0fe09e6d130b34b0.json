{"ast":null,"code":"var _jsxFileName = \"/home/freedom/Music/tcp2.0-frontend/src/screens/Dealer/2.0/StaffManagement.js\";\nimport React, { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport { connect } from 'react-redux';\nimport Header, { HeaderLeft, HeaderCenter, HeaderRight } from '../../../components/Dealer/Header';\nimport { Form, Row, Col } from 'react-bootstrap';\nimport { TCPLogo, IconAdd, IconArrowLeft, IconDeleteNew } from '../../../assets/images';\nimport Loader from 'shared/Loader';\nimport { setStaff, getStaffs, deleteStaff } from '../../../redux/actions/dealer';\n\nfunction StaffManagements(props) {\n  const {\n    history,\n    staffs,\n    getStaffs,\n    setStaff,\n    deleteStaff,\n    actionLoading\n  } = props;\n  const [openStaffIndex, setOpenStaffIndex] = useState(null);\n  const [search, setSearch] = useState(null);\n  const [filterStaff, setFilterStaff] = useState([]);\n  useEffect(() => {\n    getStaffs();\n  }, []);\n  useEffect(() => {\n    if (search != null && search != '') {\n      let temp = staffs.data.filter(d => d.company_name.toLowerCase().includes(search.toLowerCase()));\n      setFilterStaff(temp);\n    } else {\n      setFilterStaff(staffs.data);\n    }\n  }, [search]);\n  useEffect(() => {\n    setFilterStaff(staffs.data);\n  }, [staffs]);\n\n  const handleArrowBack = () => {\n    history.push('/');\n  };\n\n  const handleAddEditStaff = item => {\n    setStaff(item);\n    history.push(`/dealer/addStaff`);\n  };\n\n  const handleDeleteStaff = item => {\n    Swal.fire({\n      title: 'Delete ' + item.company_name + '?',\n      text: \"You won't be able to revert this!\",\n      icon: 'warning',\n      showCancelButton: true,\n      confirmButtonColor: '#3085d6',\n      cancelButtonColor: '#d33',\n      confirmButtonText: 'Yes, delete it!'\n    }).then(result => {\n      if (result.isConfirmed) {\n        deleteStaff(item.id);\n      }\n    });\n  };\n\n  const handleOpenStaffAction = staff => {\n    if ('map' + staff.id === openStaffIndex) setOpenStaffIndex(null);else setOpenStaffIndex('map' + staff.id);\n  };\n\n  const IconSmallArrowRight = props => {\n    return /*#__PURE__*/React.createElement(\"svg\", {\n      className: `arrow-icon ${props.id === openStaffIndex && \"arrow-icon-active\"}`,\n      enableBackground: \"new 0 0 12 12\",\n      height: \"12px\",\n      id: \"Layer_1\",\n      version: \"1.1\",\n      viewBox: \"0 0 32 32\",\n      width: \"32px\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"path\", {\n      d: \"M24.291,14.276L14.705,4.69c-0.878-0.878-2.317-0.878-3.195,0l-0.8,0.8c-0.878,0.877-0.878,2.316,0,3.194  L18.024,16l-7.315,7.315c-0.878,0.878-0.878,2.317,0,3.194l0.8,0.8c0.878,0.879,2.317,0.879,3.195,0l9.586-9.587  c0.472-0.471,0.682-1.103,0.647-1.723C24.973,15.38,24.763,14.748,24.291,14.276z\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dealer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 9\n    }\n  }, staffs.loading && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 33\n    }\n  }), actionLoading && /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 32\n    }\n  }), /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(HeaderLeft, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: IconArrowLeft,\n    onClick: () => handleArrowBack(),\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(HeaderCenter, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"header-main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"main-logo\",\n    src: TCPLogo,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 25\n    }\n  }))), /*#__PURE__*/React.createElement(HeaderRight, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: IconAdd,\n    onClick: () => handleAddEditStaff({}),\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 21\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"search-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Form.Control, {\n    value: search,\n    placeholder: \"Search\",\n    onChange: e => setSearch(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"main\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 21\n    }\n  }, filterStaff && filterStaff.map(item => /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    key: item.id,\n    className: \"single-row\",\n    onClick: () => handleOpenStaffAction(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dealer-row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 6,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"dealer-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 41\n    }\n  }, item.first_name, \" \", item.last_name)), /*#__PURE__*/React.createElement(Col, {\n    xs: 6,\n    className: \"dealer-action\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(IconSmallArrowRight, {\n    id: 'map' + item.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 47\n    }\n  })))), openStaffIndex === 'map' + item.id && /*#__PURE__*/React.createElement(Col, {\n    key: item.id,\n    xs: 12,\n    className: \"single-row-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"delete\",\n    onClick: () => handleDeleteStaff(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: IconDeleteNew,\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 45\n    }\n  }), \" Delete\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"edit\",\n    onClick: () => handleAddEditStaff(item),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 41\n    }\n  }, \"Edit\"))))))));\n}\n\nconst mapStateToProps = state => ({\n  staffs: state.dealer.staffs,\n  actionLoading: state.dealer.actionLoading\n});\n\nconst mapDispatchToProps = dispatch => ({\n  getStaffs: () => dispatch(getStaffs()),\n  setStaff: data => dispatch(setStaff(data)),\n  deleteStaff: id => dispatch(deleteStaff(id))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StaffManagements);","map":{"version":3,"sources":["/home/freedom/Music/tcp2.0-frontend/src/screens/Dealer/2.0/StaffManagement.js"],"names":["React","useState","useEffect","Swal","connect","Header","HeaderLeft","HeaderCenter","HeaderRight","Form","Row","Col","TCPLogo","IconAdd","IconArrowLeft","IconDeleteNew","Loader","setStaff","getStaffs","deleteStaff","StaffManagements","props","history","staffs","actionLoading","openStaffIndex","setOpenStaffIndex","search","setSearch","filterStaff","setFilterStaff","temp","data","filter","d","company_name","toLowerCase","includes","handleArrowBack","push","handleAddEditStaff","item","handleDeleteStaff","fire","title","text","icon","showCancelButton","confirmButtonColor","cancelButtonColor","confirmButtonText","then","result","isConfirmed","id","handleOpenStaffAction","staff","IconSmallArrowRight","loading","e","target","value","map","first_name","last_name","mapStateToProps","state","dealer","mapDispatchToProps","dispatch"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,OAAOC,MAAP,IAAiBC,UAAjB,EAA6BC,YAA7B,EAA2CC,WAA3C,QAA8D,mCAA9D;AACA,SAASC,IAAT,EAAeC,GAAf,EAAoBC,GAApB,QAA+B,iBAA/B;AACA,SAASC,OAAT,EAAkBC,OAAlB,EAA2BC,aAA3B,EAA0CC,aAA1C,QAA+D,wBAA/D;AACA,OAAOC,MAAP,MAAmB,eAAnB;AAEA,SAASC,QAAT,EAAmBC,SAAnB,EAA6BC,WAA7B,QAAgD,+BAAhD;;AAEA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAE7B,QAAM;AACFC,IAAAA,OADE;AAEFC,IAAAA,MAFE;AAGFL,IAAAA,SAHE;AAIFD,IAAAA,QAJE;AAKFE,IAAAA,WALE;AAMFK,IAAAA;AANE,MAOFH,KAPJ;AASA,QAAM,CAACI,cAAD,EAAiBC,iBAAjB,IAAsCzB,QAAQ,CAAC,IAAD,CAApD;AACA,QAAM,CAAC0B,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,IAAD,CAApC;AACA,QAAM,CAAC4B,WAAD,EAAcC,cAAd,IAAgC7B,QAAQ,CAAC,EAAD,CAA9C;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZgB,IAAAA,SAAS;AACZ,GAFQ,EAEN,EAFM,CAAT;AAIAhB,EAAAA,SAAS,CAAC,MAAM;AACZ,QAAGyB,MAAM,IAAI,IAAV,IAAkBA,MAAM,IAAI,EAA/B,EAAmC;AAC/B,UAAII,IAAI,GAAGR,MAAM,CAACS,IAAP,CAAYC,MAAZ,CAAmBC,CAAC,IAAIA,CAAC,CAACC,YAAF,CAAeC,WAAf,GAA6BC,QAA7B,CAAsCV,MAAM,CAACS,WAAP,EAAtC,CAAxB,CAAX;AACAN,MAAAA,cAAc,CAACC,IAAD,CAAd;AACH,KAHD,MAIK;AACDD,MAAAA,cAAc,CAACP,MAAM,CAACS,IAAR,CAAd;AACH;AACJ,GARQ,EAQN,CAACL,MAAD,CARM,CAAT;AAUAzB,EAAAA,SAAS,CAAC,MAAM;AACZ4B,IAAAA,cAAc,CAACP,MAAM,CAACS,IAAR,CAAd;AACH,GAFQ,EAEN,CAACT,MAAD,CAFM,CAAT;;AAIA,QAAMe,eAAe,GAAG,MAAM;AAC1BhB,IAAAA,OAAO,CAACiB,IAAR,CAAa,GAAb;AACH,GAFD;;AAIA,QAAMC,kBAAkB,GAAIC,IAAD,IAAU;AACjCxB,IAAAA,QAAQ,CAACwB,IAAD,CAAR;AACAnB,IAAAA,OAAO,CAACiB,IAAR,CAAc,kBAAd;AACH,GAHD;;AAKA,QAAMG,iBAAiB,GAAID,IAAD,IAAU;AAChCtC,IAAAA,IAAI,CAACwC,IAAL,CAAU;AACNC,MAAAA,KAAK,EAAE,YAAUH,IAAI,CAACN,YAAf,GAA4B,GAD7B;AAENU,MAAAA,IAAI,EAAE,mCAFA;AAGNC,MAAAA,IAAI,EAAE,SAHA;AAINC,MAAAA,gBAAgB,EAAE,IAJZ;AAKNC,MAAAA,kBAAkB,EAAE,SALd;AAMNC,MAAAA,iBAAiB,EAAE,MANb;AAONC,MAAAA,iBAAiB,EAAE;AAPb,KAAV,EAQGC,IARH,CAQSC,MAAD,IAAY;AAChB,UAAIA,MAAM,CAACC,WAAX,EAAwB;AACpBlC,QAAAA,WAAW,CAACsB,IAAI,CAACa,EAAN,CAAX;AACH;AACJ,KAZD;AAaH,GAdD;;AAgBA,QAAMC,qBAAqB,GAAIC,KAAD,IAAW;AACrC,QAAG,QAAMA,KAAK,CAACF,EAAZ,KAAmB7B,cAAtB,EACIC,iBAAiB,CAAC,IAAD,CAAjB,CADJ,KAGIA,iBAAiB,CAAC,QAAM8B,KAAK,CAACF,EAAb,CAAjB;AACP,GALD;;AAOA,QAAMG,mBAAmB,GAAIpC,KAAD,IAAW;AACnC,wBACI;AAAK,MAAA,SAAS,EAAG,cAAaA,KAAK,CAACiC,EAAN,KAAa7B,cAAb,IAA+B,mBAAoB,EAAjF;AAAoF,MAAA,gBAAgB,EAAC,eAArG;AAAqH,MAAA,MAAM,EAAC,MAA5H;AAAmI,MAAA,EAAE,EAAC,SAAtI;AAAgJ,MAAA,OAAO,EAAC,KAAxJ;AAA8J,MAAA,OAAO,EAAC,WAAtK;AAAkL,MAAA,KAAK,EAAC,MAAxL;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI;AAAM,MAAA,CAAC,EAAC,qSAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ;AAKH,GAND;;AAQA,sBACI;AAAK,IAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEMF,MAAM,CAACmC,OAAP,iBAAkB,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFxB,EAIMlC,aAAa,iBAAI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJvB,eAMI,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,GAAG,EAAEV,aAAV;AAAyB,IAAA,OAAO,EAAE,MAAMwB,eAAe,EAAvD;AAA2D,IAAA,GAAG,EAAC,EAA/D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,eAII,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,aAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,WAAf;AAA2B,IAAA,GAAG,EAAE1B,OAAhC;AAAyC,IAAA,GAAG,EAAC,EAA7C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CAJJ,eASI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,GAAG,EAAEC,OAAV;AAAmB,IAAA,OAAO,EAAE,MAAM2B,kBAAkB,CAAC,EAAD,CAApD;AAA0D,IAAA,GAAG,EAAC,EAA9D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CATJ,CANJ,eAoBI;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,IAAD,CAAM,OAAN;AAAc,IAAA,KAAK,EAAEb,MAArB;AAA6B,IAAA,WAAW,EAAC,QAAzC;AAAkD,IAAA,QAAQ,EAAGgC,CAAD,IAAO/B,SAAS,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAA5E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CADJ,CADJ,CApBJ,eA4BI;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACQ;AAAK,IAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACEhC,WAAW,IAAIA,WAAW,CAACiC,GAAZ,CAAiBrB,IAAD,iBAC7B,uDACI,oBAAC,GAAD;AAAK,IAAA,GAAG,EAAEA,IAAI,CAACa,EAAf;AAAmB,IAAA,SAAS,EAAC,YAA7B;AAA0C,IAAA,OAAO,EAAE,MAAMC,qBAAqB,CAACd,IAAD,CAA9E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAM,IAAA,SAAS,EAAC,aAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA+BA,IAAI,CAACsB,UAApC,OAAiDtB,IAAI,CAACuB,SAAtD,CADJ,CADJ,eAII,oBAAC,GAAD;AAAK,IAAA,EAAE,EAAE,CAAT;AAAY,IAAA,SAAS,EAAC,eAAtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAAM,oBAAC,mBAAD;AAAqB,IAAA,EAAE,EAAG,QAAMvB,IAAI,CAACa,EAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAN,CADJ,CAJJ,CADJ,EASM7B,cAAc,KAAO,QAAMgB,IAAI,CAACa,EAAjC,iBACG,oBAAC,GAAD;AAAK,IAAA,GAAG,EAAEb,IAAI,CAACa,EAAf;AAAmB,IAAA,EAAE,EAAE,EAAvB;AAA2B,IAAA,SAAS,EAAC,oBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAQ,IAAA,SAAS,EAAC,QAAlB;AAA2B,IAAA,OAAO,EAAE,MAAMZ,iBAAiB,CAACD,IAAD,CAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAK,IAAA,GAAG,EAAE1B,aAAV;AAAyB,IAAA,GAAG,EAAC,EAA7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,YADJ,eAII;AAAQ,IAAA,SAAS,EAAC,MAAlB;AAAyB,IAAA,OAAO,EAAE,MAAMyB,kBAAkB,CAACC,IAAD,CAA1D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAJJ,CAVR,CADJ,CADa,CADjB,CADR,CA5BJ,CADJ;AA2DH;;AAED,MAAMwB,eAAe,GAAGC,KAAK,KAAK;AAC9B3C,EAAAA,MAAM,EAAE2C,KAAK,CAACC,MAAN,CAAa5C,MADS;AAE9BC,EAAAA,aAAa,EAAE0C,KAAK,CAACC,MAAN,CAAa3C;AAFE,CAAL,CAA7B;;AAKA,MAAM4C,kBAAkB,GAAGC,QAAQ,KAAK;AACpCnD,EAAAA,SAAS,EAAE,MAAMmD,QAAQ,CAACnD,SAAS,EAAV,CADW;AAEpCD,EAAAA,QAAQ,EAAGe,IAAD,IAAUqC,QAAQ,CAACpD,QAAQ,CAACe,IAAD,CAAT,CAFQ;AAGpCb,EAAAA,WAAW,EAAGmC,EAAD,IAAQe,QAAQ,CAAClD,WAAW,CAACmC,EAAD,CAAZ;AAHO,CAAL,CAAnC;;AAMA,eAAelD,OAAO,CAClB6D,eADkB,EAElBG,kBAFkB,CAAP,CAGbhD,gBAHa,CAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Swal from 'sweetalert2';\nimport { connect } from 'react-redux';\nimport Header, { HeaderLeft, HeaderCenter, HeaderRight } from '../../../components/Dealer/Header';\nimport { Form, Row, Col } from 'react-bootstrap';\nimport { TCPLogo, IconAdd, IconArrowLeft, IconDeleteNew } from '../../../assets/images';\nimport Loader from 'shared/Loader';\n\nimport { setStaff, getStaffs,deleteStaff } from '../../../redux/actions/dealer';\n\nfunction StaffManagements(props) {\n\n    const {\n        history,\n        staffs,\n        getStaffs,\n        setStaff,\n        deleteStaff,\n        actionLoading\n    } = props;\n\n    const [openStaffIndex, setOpenStaffIndex] = useState(null);\n    const [search, setSearch] = useState(null);\n    const [filterStaff, setFilterStaff] = useState([]);\n\n    useEffect(() => {\n        getStaffs();\n    }, []);\n\n    useEffect(() => {\n        if(search != null && search != '') {\n            let temp = staffs.data.filter(d => d.company_name.toLowerCase().includes(search.toLowerCase()))\n            setFilterStaff(temp);\n        }\n        else {\n            setFilterStaff(staffs.data);\n        }\n    }, [search]);\n\n    useEffect(() => {\n        setFilterStaff(staffs.data);\n    }, [staffs]);\n\n    const handleArrowBack = () => {       \n        history.push('/')\n    }\n\n    const handleAddEditStaff = (item) => {  \n        setStaff(item)     \n        history.push(`/dealer/addStaff`);\n    }\n\n    const handleDeleteStaff = (item) => {  \n        Swal.fire({\n            title: 'Delete '+item.company_name+'?',\n            text: \"You won't be able to revert this!\",\n            icon: 'warning',\n            showCancelButton: true,\n            confirmButtonColor: '#3085d6',\n            cancelButtonColor: '#d33',\n            confirmButtonText: 'Yes, delete it!'\n        }).then((result) => {\n            if (result.isConfirmed) {\n                deleteStaff(item.id)\n            }\n        })\n    }\n\n    const handleOpenStaffAction = (staff) => {\n        if('map'+staff.id === openStaffIndex) \n            setOpenStaffIndex(null) \n        else \n            setOpenStaffIndex('map'+staff.id)\n    };\n\n    const IconSmallArrowRight = (props) => {\n        return (\n            <svg className={`arrow-icon ${props.id === openStaffIndex && \"arrow-icon-active\"}`} enableBackground=\"new 0 0 12 12\" height=\"12px\" id=\"Layer_1\" version=\"1.1\" viewBox=\"0 0 32 32\" width=\"32px\">\n                <path d=\"M24.291,14.276L14.705,4.69c-0.878-0.878-2.317-0.878-3.195,0l-0.8,0.8c-0.878,0.877-0.878,2.316,0,3.194  L18.024,16l-7.315,7.315c-0.878,0.878-0.878,2.317,0,3.194l0.8,0.8c0.878,0.879,2.317,0.879,3.195,0l9.586-9.587  c0.472-0.471,0.682-1.103,0.647-1.723C24.973,15.38,24.763,14.748,24.291,14.276z\"/>\n            </svg>\n        )\n    }\n\n    return (\n        <div className=\"dealer\">\n\n            { staffs.loading && <Loader /> }\n\n            { actionLoading && <Loader /> }\n\n            <Header>\n                <HeaderLeft>\n                    <img src={IconArrowLeft} onClick={() => handleArrowBack()} alt=\"\"/>\n                </HeaderLeft>\n                <HeaderCenter>\n                    <div className=\"header-main\">\n                        <img className=\"main-logo\" src={TCPLogo} alt=\"\"/>\n                    </div>\n                </HeaderCenter>\n                <HeaderRight>\n                    <img src={IconAdd} onClick={() => handleAddEditStaff({})} alt=\"\"/>\n                </HeaderRight>\n            </Header>\n\n            <div className=\"search-header\">\n                <Form>     \n                    <Form.Group>\n                        <Form.Control value={search} placeholder=\"Search\" onChange={(e) => setSearch(e.target.value)}></Form.Control>\n                    </Form.Group>\n                </Form>\n            </div>\n\n            <div className=\"main\">\n                    <div className=\"list\">\n                    { filterStaff && filterStaff.map((item) => (\n                        <>\n                            <Row key={item.id} className=\"single-row\" onClick={() => handleOpenStaffAction(item)}>\n                                <div className=\"dealer-row\">\n                                    <Col xs={6}>\n                                        <span className=\"dealer-name\">{item.first_name} {item.last_name}</span>\n                                    </Col>\n                                    <Col xs={6} className=\"dealer-action\">\n                                        <span><IconSmallArrowRight id={ 'map'+item.id }/></span>\n                                    </Col>\n                                </div>\n                                {(openStaffIndex ===  ('map'+item.id)) && (\n                                    <Col key={item.id} xs={12} className=\"single-row-details\">\n                                        <button className=\"delete\" onClick={() => handleDeleteStaff(item)}>\n                                            <img src={IconDeleteNew} alt=\"\"/> Delete\n                                        </button>\n                                        <button className=\"edit\" onClick={() => handleAddEditStaff(item)}>Edit</button>\n                                    </Col>\n                                )}\n                            </Row>\n                        </>\n                    ))}\n                </div>\n            </div>\n\n        </div>\n    )\n    \n}\n\nconst mapStateToProps = state => ({\n    staffs: state.dealer.staffs,\n    actionLoading: state.dealer.actionLoading\n});\n\nconst mapDispatchToProps = dispatch => ({\n    getStaffs: () => dispatch(getStaffs()),\n    setStaff: (data) => dispatch(setStaff(data)),\n    deleteStaff: (id) => dispatch(deleteStaff(id))\n});\n\nexport default connect(\n    mapStateToProps,\n    mapDispatchToProps\n)(StaffManagements);"]},"metadata":{},"sourceType":"module"}