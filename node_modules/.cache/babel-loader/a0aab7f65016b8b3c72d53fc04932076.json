{"ast":null,"code":"var _jsxFileName = \"/home/freedom/Music/tcp2.0-frontend/src/components/commons/input.js\";\nimport React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ErrorMessage from './errorMessage';\n/*\n * Common Input component\n\n * @returns {JSX.Element}\n */\n\nconst inputValidation = (inputVal, required, regexString) => {\n  const regex = regexString && new RegExp(regexString, 'i');\n  const isValid = regex && inputVal ? regex.test(inputVal) : true;\n  return !!required && inputVal === '' ? true : !isValid ? true : false;\n};\n\nconst Input = props => {\n  const {\n    type = 'text',\n    name,\n    id,\n    value,\n    defaultValue,\n    className = '',\n    ariaLabel,\n    required = false,\n    label,\n    dataName,\n    inputRef,\n    min,\n    maxLength,\n    labelTransform = true,\n    defaultText,\n    regex,\n    optionalParams,\n    disabled = false,\n    inputClass = '',\n    onFocus,\n    onBlur,\n    handleChange,\n    validationResult,\n    error\n  } = props;\n  const [focussed, setFocussed] = useState(!!value || !!defaultValue);\n  const [inputValue, setInputValue] = useState(value || defaultValue || '');\n  const [inputInvalid, setInputInvalid] = useState(required && !(value || defaultValue));\n\n  const updateInputValue = (newVal = '') => {\n    setInputValue(newVal);\n    setInputInvalid(inputValidation(newVal, required, regex));\n  };\n\n  const handleFocus = () => {\n    setFocussed(true);\n    typeof onFocus === 'function' && onFocus();\n  };\n\n  const handleBlur = () => {\n    setFocussed(false);\n    typeof onBlur === 'function' && onBlur();\n  };\n\n  const handleInputChange = event => {\n    updateInputValue(event.currentTarget && event.currentTarget.value);\n    typeof handleChange === 'function' && handleChange(event);\n  };\n\n  useEffect(() => {\n    if (defaultValue === undefined && value !== undefined && value !== inputValue) {\n      updateInputValue(value);\n    }\n  });\n  let errorLabel = '';\n\n  if (validationResult && validationResult[name] && error) {\n    const errorType = validationResult[name].error;\n    errorLabel = error[errorType] || null;\n  }\n\n  const inputId = id || name,\n        ariaLabelledBy = id && `${id}-label`,\n        showError = !!errorLabel && inputInvalid,\n        transform = inputValue !== '' || focussed;\n  console.log(errorLabel);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: `input-holder ${className} ${type} ${disabled ? 'disabled' : ''} ${showError ? 'has-error' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 13\n    }\n  }, label && /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: inputId,\n    className: `form-label ${labelTransform && transform ? 'transform' : ''}`,\n    id: ariaLabelledBy,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    dangerouslySetInnerHTML: {\n      __html: label\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"input-field\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", Object.assign({\n    className: `form-control ${inputClass} ${value !== '' ? 'has-input' : 'empty'} ${showError ? 'invalid' : ''}`,\n    ref: inputRef,\n    type: type,\n    id: inputId,\n    placeholder: defaultText,\n    maxLength: maxLength,\n    name: name,\n    min: min,\n    \"data-name\": dataName,\n    value: inputValue,\n    \"aria-label\": ariaLabel\n  }, label && {\n    'aria-labelledby': ariaLabelledBy\n  }, {\n    autoComplete: \"off\",\n    onFocus: handleFocus,\n    onBlur: handleBlur,\n    required: required,\n    onChange: handleInputChange,\n    \"data-regex\": regex,\n    disabled: disabled\n  }, optionalParams, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 21\n    }\n  })))), showError && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error-label\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }, errorlabel));\n};\n\nexport default Input;\nInput.propTypes = {\n  type: PropTypes.string,\n  name: PropTypes.string,\n  placeholder: PropTypes.string,\n  inputClass: PropTypes.string,\n  ariaLabel: PropTypes.string,\n  isRequired: PropTypes.bool\n};","map":{"version":3,"sources":["/home/freedom/Music/tcp2.0-frontend/src/components/commons/input.js"],"names":["React","useEffect","useState","PropTypes","ErrorMessage","inputValidation","inputVal","required","regexString","regex","RegExp","isValid","test","Input","props","type","name","id","value","defaultValue","className","ariaLabel","label","dataName","inputRef","min","maxLength","labelTransform","defaultText","optionalParams","disabled","inputClass","onFocus","onBlur","handleChange","validationResult","error","focussed","setFocussed","inputValue","setInputValue","inputInvalid","setInputInvalid","updateInputValue","newVal","handleFocus","handleBlur","handleInputChange","event","currentTarget","undefined","errorLabel","errorType","inputId","ariaLabelledBy","showError","transform","console","log","__html","errorlabel","propTypes","string","placeholder","isRequired","bool"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport ErrorMessage from './errorMessage';\n\n/*\n * Common Input component\n\n * @returns {JSX.Element}\n */\n\nconst inputValidation = (inputVal, required, regexString) => {\n\n    const regex = regexString && new RegExp(regexString, 'i');\n\n    const isValid = regex && inputVal ? regex.test(inputVal) : true;\n\n    return !!required && inputVal === '' ? true : !isValid ? true : false;\n};\n\nconst Input = (props) => {\n\n    const {\n        type = 'text',\n        name,\n        id,\n        value,\n        defaultValue,\n        className = '',\n        ariaLabel,\n        required = false,\n        label,\n        dataName,\n        inputRef,\n        min,\n        maxLength,\n        labelTransform = true,\n        defaultText,\n        regex,\n        optionalParams,\n        disabled = false,\n        inputClass = '',\n        onFocus,\n        onBlur,\n        handleChange,\n        validationResult,\n        error\n    } = props;\n\n    const [ focussed, setFocussed ] = useState(!!value || !!defaultValue);\n    const [ inputValue, setInputValue ] = useState(value || defaultValue || '');\n    const [ inputInvalid, setInputInvalid ] = useState(required && !(value || defaultValue));\n\n    const updateInputValue = (newVal = '') => {\n\n        setInputValue(newVal);\n        setInputInvalid(inputValidation(newVal, required, regex));\n    };\n\n    const handleFocus = () => {\n\n        setFocussed(true);\n\n        typeof onFocus === 'function' && onFocus();\n    };\n\n    const handleBlur = () => {\n\n        setFocussed(false);\n\n        typeof onBlur === 'function' && onBlur();\n    };\n\n    const handleInputChange = (event) => {\n\n        updateInputValue(event.currentTarget && event.currentTarget.value);\n\n        typeof handleChange === 'function' && handleChange(event);\n    };\n\n    useEffect(() => {\n\n        if ( defaultValue === undefined && value !== undefined && value !== inputValue) {\n            updateInputValue(value);\n        }\n    });\n\n    let errorLabel = '';\n\n    if (validationResult && validationResult[name] && error ) {\n\n        const errorType = validationResult[name].error;\n\n        errorLabel = error[errorType] || null;\n    }\n\n    const inputId = id || name,\n        ariaLabelledBy = id && `${id}-label`,\n        showError = !!errorLabel && inputInvalid,\n        transform = inputValue !== '' || focussed;\n\n\n        console.log(errorLabel)\n\n    return (\n        <div\n            className={`input-holder ${className} ${type} ${disabled ? 'disabled' : ''} ${showError ? 'has-error' : ''}`}\n        >\n            <div className='input-container'>\n                {label && (\n                    <label\n                        htmlFor={inputId}\n                        className={`form-label ${labelTransform && transform ? 'transform' : ''\n                        }`}\n                        id={ariaLabelledBy}>\n                        <span dangerouslySetInnerHTML={{ __html: label }} />\n                    </label>\n                )}\n                <div className='input-field'>\n                    <input\n                        className={`form-control ${ inputClass } ${ value !== '' ? 'has-input' : 'empty' } ${ showError ? 'invalid' : '' }`}\n                        ref={inputRef}\n                        type={type}\n                        id={inputId}\n                        placeholder={defaultText}\n                        maxLength={maxLength}\n                        name={name}\n                        min={min}\n                        data-name={dataName}\n                        value={inputValue}\n                        aria-label={ariaLabel}\n                        {...(label && {\n                            'aria-labelledby': ariaLabelledBy\n                        })}\n                        autoComplete='off'\n                        onFocus={handleFocus}\n                        onBlur={handleBlur}\n                        required={required}\n                        onChange={handleInputChange}\n                        data-regex={regex}\n                        disabled={disabled}\n                        {...optionalParams}\n                    />\n                </div>\n            </div>\n            {showError &&\n                <div className='error-label'>{errorlabel}</div>\n            }\n        </div>\n    );\n};\n\nexport default Input;\n\nInput.propTypes = {\n    type: PropTypes.string,\n    name: PropTypes.string,\n    placeholder: PropTypes.string,\n    inputClass: PropTypes.string,\n    ariaLabel: PropTypes.string,\n    isRequired: PropTypes.bool\n};"]},"metadata":{},"sourceType":"module"}